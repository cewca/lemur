<p>
	<a href="/lemur/course/manage?id={{course}}" id="done-editing">&laquo; {"Done Editing"}</a>
	<span id="saving">&nbsp;&nbsp;&nbsp;{"Saving..."}</span>
</p>

<div class="sidebar">
	{"Add content"}:
	<ul>
		<li><a href="#" id="add-text" data-bind="click: add_text_field">{"Text"}</a></li>
		<li><a href="#" id="add-image" data-bind="click: add_text_field">{"Image"}</a></li>
		<li><a href="#">{"Video"}</a></li>
		<li><a href="#">{"HTML Code"}</a></li>
		<li><a href="#">{"Pre-formatted text"}</a></li>
		<li><a href="#">{"SCORM Module"}</a></li>
		<li><a href="#">{"File download"}</a></li>
		<li><a href="#">{"Accordion"}</a></li>
		<li><a href="#">{"Definition"}</a></li>
	</ul>
	{"Add a question"}:
	<ul>
		<li><a href="#">{"Single-line text"}</a></li>
		<li><a href="#">{"Paragraph text"}</a></li>
		<li><a href="#">{"Drop down"}</a></li>
		<li><a href="#">{"Checkboxes"}</a></li>
		<li><a href="#">{"Multiple choice"}</a></li>
	</ul>
</div>

<div class="main">
	<div class="toggle">
		<a href="#" id="toggle-list" data-bind="click: show_list" title="{"Sort items"}"></a>
		<a href="#" id="toggle-full" data-bind="click: show_full" title="{"Edit items"}"></a>
	</div>
	<div id="item-list-full">
		<p class="info">{"Click the links to the left to add content to your page."}</p>
		<ul id="item-list" data-bind="template: { name: template_name, foreach: items }"></ul>
	</div>
	<div id="item-list-list">
		<p class="info">{"Drag and drop to re-order your page content."}</p>
		<ul id="item-list-sortable" data-bind="sortable: { template: 'tpl-list-item', data: items }"></ul>
	</div>
</div>

<script>
$(function () {
	$.waypoints.settings.scrollThrottle = 30;
	$('.sidebar').waypoint (function (event, direction) {
		if ($('body').scrollTop () >= 120 || $('html').scrollTop () >= 120) {
			$(this).addClass ('sticky');
		} else {
			$(this).removeClass ('sticky');
		}
		event.stopPropagation ();
	});

	editor.init ({
		course: {{course}},
		page: {{page}},
		items: {{items|json_encode}},
		str: {
			delete_confirm: '{"Are you sure you want to delete this item?"}'
		},
		type_names: {
			1: '{"Text"}',
			2: '{"Image"}'
		}
	});

	$('.wysiwyg').redactor (editor.redactor_options);
});
</script>

<script id="tpl-list-item" type="text/html">
	<li class="sortable-item" data-bind="attr: { 'data-id': id }">
		<a href="#" data-bind="attr: { 'data-id': id }">
			<span data-bind="text: title"></span>
			(<span data-bind="text: type_name"></span>)
		</a>
	</li>
</script>

<script id="tpl-item-1" type="text/html">
	<li class="item" data-bind="attr: { id: item_id, 'data-id': id }">
		<p>
			<label>{"Title"}:</label><br />
			<input type="text" name="title" data-bind="value: title, event: { blur: editor.update_items }" size="50" />
		</p>
		<p>
			<label>{"Body"}:</label><br />
			<textarea
				name="content"
				class="wysiwyg"
				data-bind="value: content, event: { blur: editor.update_items }"
				style="width: 100%; height: 200px"
			></textarea>
		</p>
	</li>
</script>
